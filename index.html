<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Embedded Map</title>
    <style>
        /* Make the map and body fill the entire screen */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* Hide scrollbars */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        /* Style for the map container */
        #map-container {
            width: 100%;
            height: 100%;
            position: relative; /* Needed for positioning the info box */
        }

        /* Style for the iframe to ensure it fills the container */
        #map-frame {
            width: 100%;
            height: 100%;
            border: none; /* Remove default border */
        }

        /* Informational box to show which coordinates are being used */
        #info-box {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            font-size: 14px;
            max-width: 90%;
        }
    </style>
</head>
<body>

    <div id="map-container">
        <!-- The iframe for the map will be loaded here by JavaScript -->
        <iframe id="map-frame"
            src=""
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
        </iframe>
        <!-- This div will display information about the loaded coordinates -->
        <div id="info-box">Loading map...</div>
    </div>

    <script>
        // This function runs once the page's content has fully loaded
        window.onload = function() {
            const infoBox = document.getElementById('info-box');
            const mapFrame = document.getElementById('map-frame');

            // --- 1. SET DEFAULT COORDINATES ---
            // Toronto, ON, Canada will be used if no parameters are provided
            const defaultLatitude = 43.6532;
            const defaultLongitude = -79.3832;
            let displayMessage = `Displaying default location (Toronto).`;

            // --- 2. GET COORDINATES FROM URL PARAMETERS ---
            // Create a URLSearchParams object from the current URL's query string
            const urlParams = new URLSearchParams(window.location.search);
            const latParam = urlParams.get('lat');
            const lonParam = urlParams.get('lon');

            let latitude = defaultLatitude;
            let longitude = defaultLongitude;

            // --- 3. VALIDATE AND USE THE PARAMETERS ---
            // Check if both 'lat' and 'lon' parameters exist and are numbers
            if (latParam && lonParam && !isNaN(latParam) && !isNaN(lonParam)) {
                latitude = parseFloat(latParam);
                longitude = parseFloat(lonParam);
                displayMessage = `Displaying coordinates: Latitude ${latitude}, Longitude ${longitude}`;
            }

            // --- 4. CONSTRUCT THE GOOGLE MAPS URL ---
            // The `output=embed` parameter is crucial for displaying the map in an iframe
            const zoomLevel = 15;
            const mapUrl = `https://maps.google.com/maps?q=${latitude},${longitude}&z=${zoomLevel}&output=embed`;

            // --- 5. UPDATE THE PAGE ---
            // Set the src of the iframe to the newly constructed URL
            mapFrame.src = mapUrl;
            // Update the info box with the relevant message
            infoBox.textContent = displayMessage;
        };
    </script>

</body>
</html>
